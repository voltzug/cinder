### Cinder infra - production properties
# Do NOT store secrets here. Use Spring Boot Credential Store (~/.config/spring-boot/credentials.properties)
spring.application.name=cinder-infra

## SQLite production DB (file). Override with env var CINDER_DB_PATH if needed.
spring.datasource.url=jdbc:sqlite:${CINDER_DB_PATH:./data/cinder.db}
spring.datasource.driver-class-name=org.sqlite.JDBC
spring.jpa.database-platform=org.hibernate.community.dialect.SQLiteDialect
# Hibernate: do not auto-create/alter schema in production
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
# SQL initialization: create tables from schema.sql if they don't exist
spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:schema.sql

## ENV
# Active pepper version for new uploads (default: 1). Override with CINDER_ACTIVE_PEPPER_VERSION.
cinder.pepper.version=${CINDER_PEPPER_ACTIVE_VERSION:}
# Peppers (map of version->hex) must be loaded from credential store or env vars.
# Example: cinder.pepper.hex.1=...
# Env var: CINDER_PEPPER_HEX_1=...

# Local file system storage directory for encrypted blobs
cinder.storage.local.directory=${CINDER_STORAGE_DIR:./data/files}


### Sub-modules
## Scheduler configuration
# expired files cleanup (every hour at minute 0)
cinder.scheduler.cleanup-cron=0 0 * * * *
# Enable/disable the cleanup scheduler
cinder.scheduler.enabled=true

## Session configuration
# Session timeout in seconds (5 minutes)
cinder.session.timeout-seconds=300
# Maximum download attempts per session
cinder.session.max-attempts=5

## Logging
logging.level.com.voltzug.cinder.spring.infra=INFO
# Component-specific logging
logging.level.com.voltzug.cinder.spring.infra.crypto=WARN
logging.level.com.voltzug.cinder.spring.infra.db.config.DbLogger=WARN
logging.level.com.voltzug.cinder.spring.infra.session=INFO
logging.level.com.voltzug.cinder.spring.infra.filestore=INFO
logging.level.com.voltzug.cinder.spring.infra.db=INFO
logging.level.com.voltzug.cinder.spring.infra.scheduler=INFO
logging.level.com.voltzug.cinder.spring.infra.config=INFO
# Reduce Spring framework noise
logging.level.org.springframework=WARN
logging.level.org.springframework.boot=INFO
logging.level.org.springframework.web=INFO
# Reduce noise from external dependencies
logging.level.org.hibernate=WARN
logging.level.com.zaxxer.hikari=WARN
# Console logging pattern
logging.pattern.console=%yellow(%d{HH:mm}):%d{ss.S} [%red(%thread)] %highlight(%-5level) %cyan(%logger{36}) - %msg%n
# File logging
logging.file.name=logs/cinder-infra.log
logging.file.max-size=10MB
logging.file.max-history=30
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n
