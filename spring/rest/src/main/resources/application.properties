### Cinder REST API â€” production properties
# Do NOT store secrets here. Use Spring Boot Credential Store (~/.config/spring-boot/credentials.properties)
spring.application.name=cinder-rest

## Server configuration
server.port=${CINDER_WEB_PORT:8088}

# Multipart file upload settings
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=9MB
spring.servlet.multipart.max-request-size=11MB
spring.servlet.multipart.file-size-threshold=2KB

# Static resources & SPA routing
# Disable default error page (SPA handles errors)
server.error.whitelabel.enabled=false
# Enable static resource serving from classpath:/static/
spring.web.resources.add-mappings=true
# Cache static resources in production (1 year for hashed assets)
spring.web.resources.cache.period=31536000
# Enable resource chain for SPA fallback
spring.web.resources.chain.enabled=true
spring.web.resources.chain.strategy.content.enabled=true
spring.web.resources.chain.strategy.content.paths=/**/*.js,/**/*.css

# Jackson JSON serialization
#spring.jackson.serialization.write-dates-as-timestamps=false
#spring.jackson.default-property-inclusion=non_null


### Sub-modules
## Actuator & monitoring
management.endpoints.web.exposure.include=health,info,metrics

## Logging
# Root logging level
logging.level.root=INFO
# Cinder module logging
logging.level.com.voltzug.cinder.spring.rest=DEBUG
logging.level.com.voltzug.cinder.spring.infra=DEBUG
# Reduce noise from framework
logging.level.org.springframework.web=INFO
logging.level.org.hibernate=WARN







# TEMPORARY FIX
## SQLite production DB (file). Override with env var CINDER_DB_PATH if needed.
spring.datasource.url=jdbc:sqlite:${CINDER_DB_PATH:./data/cinder.db}
spring.datasource.driver-class-name=org.sqlite.JDBC
spring.jpa.database-platform=org.hibernate.community.dialect.SQLiteDialect
# Hibernate: do not auto-create/alter schema in production
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
# SQL initialization: create tables from schema.sql if they don't exist
spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:schema.sql

## ENV
# Active pepper version for new uploads (default: 1). Override with CINDER_ACTIVE_PEPPER_VERSION.
cinder.pepper.version=${CINDER_PEPPER_ACTIVE_VERSION:}
# Peppers (map of version->hex) must be loaded from credential store or env vars.
# Example: cinder.pepper.hex.1=...
# Env var: CINDER_PEPPER_HEX_1=...

# Local file system storage directory for encrypted blobs
cinder.storage.local.directory=${CINDER_STORAGE_DIR:./data/files}


### Sub-modules
## Scheduler configuration
# expired files cleanup (every hour at minute 0)
cinder.scheduler.cleanup-cron=0 0 * * * *
# Enable/disable the cleanup scheduler
cinder.scheduler.enabled=true

## Session configuration
# Session timeout in seconds (5 minutes)
cinder.session.timeout-seconds=300
# Maximum download attempts per session
cinder.session.max-attempts=5
