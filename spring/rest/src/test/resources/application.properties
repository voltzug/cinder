# Test properties for rest module
# Keep tests lightweight: run the server on a random port during tests.
server.port=0

# Tests mock DB and do not require any JDBC/JPA/Observation auto-configuration.
# Exclude core auto-configurations that would attempt to create a DataSource / JPA stack and metrics
spring.autoconfigure.exclude=\
org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.DataSourceInitializationAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,\
org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\
org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,\
org.springframework.boot.actuate.autoconfigure.metrics.MetricsAutoConfiguration,\
org.springframework.boot.actuate.autoconfigure.metrics.export.simple.SimpleMetricsExportAutoConfiguration

# Defensive re-checks to ensure JPA/SQL initialization is fully disabled at runtime
spring.jpa.enabled=false
spring.jpa.hibernate.ddl-auto=none
spring.sql.init.mode=never
spring.sql.init.enabled=false
spring.datasource.initialization-mode=never

# If a particular test needs an in-memory DB, enable the lines below locally for that test run (kept commented)
# spring.datasource.url=jdbc:sqlite::memory:
# spring.datasource.driver-class-name=org.sqlite.JDBC
# spring.jpa.hibernate.ddl-auto=update
# spring.jpa.show-sql=false

# Disable external credential lookup during tests; allow empty pepper for unit tests
cinder.pepper-hex=
